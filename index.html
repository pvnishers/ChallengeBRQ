<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/78a4d9e669.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>
    <body>
        <div class="d-flex flex-row barra-topo">
            <p id="mode">Modo Claro</p>
            <button class="" onclick="modoEscuro()">
                <i class="fa-solid fa-toggle-off modoClaro modos"></i>
                <i class="fa-solid fa-toggle-on hide modoEscuro modos" style="color:white"></i>
            </button>
        </div>
        <div class="container">       
            <div class="row">
                <div class="col-7 justify-content-center">
                    <div id="header-box" class="header-box row">
                        <h4 id="header-day" class="row justify-content-center"></h4>
                        <h1 id="header-time" class="g-gradient row justify-content-center"></h1>
                    </div>
                    <div class="row justify-content-center">
                        <div id="player-box" class="d-flex flex-row justify-content-around">
                            <div class="album-art align-self-center">
                            </div>
                            <div class="track-info align-self-center">
                                <p>Running Up That Hill(A Deal With God)</p>
                                <p class="text-center">Kate Bush</p>
                                <p class="text-center">Hounds Of Love</p>
                            </div>
                            <div class="player-controls align-self-center d-flex flex-row">
                                <i class="fa-solid fa-backward"></i>
                                <i class="fa-solid fa-pause"></i>
                                <i class="fa-solid fa-forward"></i>
                            </div>
                        </div>
                    </div>
                    <div id="widget-box" class="row justify-content-between">
                        <div class="widget-row">
                            <div class="widget-group d-flex flex-column align-items-center">     
                                <button onclick="acenderLuz()">
                                    <div class="widget-sm">
                                        <i id="luz" class="fa-regular fa-lightbulb icon-gradient"></i>
                                    </div>
                                </button>
                                <p>Acender/Apagar luzes - Garagem</p>
                            </div>  
                            <div class="widget-group">
                                <button onclick="abrirGaragem()">
                                    <div class="widget-sm">
                                        <i id="garagem" class="fa-solid fa-warehouse icon-gradient"></i>
                                    </div>
                                </button>
                                <p>Abrir/Fechar - Garagem</p>
                            </div>
                            <div class="widget-group">
                                <div class="widget-sm">
                                    <i class="fa-solid fa-gas-pump icon-gradient"></i>
                                </div>
                                <p>Histórico de Abastecimento</p>
                            </div>
                        </div>
                        <div class="widget-row">
                            <div class="widget-group">
                                <div class="widget-sm">
                                    <i class="fa-solid fa-location-arrow icon-gradient"></i>
                                </div>
                                <p>GPS</p>
                            </div>
                            <div class="widget-group">
                                <div class="widget-sm">
                                    <i class="fa-solid fa-toolbox icon-gradient"></i>
                                </div>
                                <p>Manual Eletrônico</p>
                            </div>
                            <div class="widget-group">
                                <button id="btn-popup">
                                    <div class="widget-sm">
                                        <i class="fa-brands fa-sistrix icon-gradient"></i>
                                    </div>
                                </button>
                                <p>Atalhos</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="widget-column" class="col-5">
                    <div class="widget-group">
                        <div class="widget-m">
                            <div class="icons-widget col-3">
                                <i class="fa-solid fa-snowflake"></i>
                                <button id="botaoAc"><i id="icon-ac" class="fa-solid fa-power-off red-ac"></i></button>
                            </div>
                            <input type="number" id="nmrAc" value="19" style="display:none;"/>
                            <p id="temperaturaAc" class="align-self-center">19°</p>
                            <div class="buttons-ac">
                                <button id="aumentarAc" onclick="aumentarAC()"><i class="fa-solid fa-circle-plus"></i></button>
                            <button id="diminuirAc" onclick="diminuirAC()"><i class="fa-solid fa-circle-minus"></i></button>
                            </div>
                        </div>
                        <p id="acEstado">A/C Desligado</p>
                    </div>
                    <div class="widget-group">
                        <div class="row widget-m clima">
                            <div id="fundo-clima"></div>
                            <div class="info-clima">
                                <div class="cidade-clima"><span>São Paulo <i class="fa-solid fa-location-dot"></i></span></div>
                                <div class="temperaturas">
                                    <p id="temperaturaCl">25°</p>
                                    <div class="col-clima">
                                        <div class="temp-max-min">
                                            <span>Máxima: <span id="temp-max">19°</span></span>
                                            <span>Mínima: <span id="temp-min">17°</span></span>
                                        </div>
                                        <span>Condições esperadas:<br><span id="cond-esperadas">Sol</span></span>
                                    </div>
                                </div>
                                <div class="d-flex row-reverse justify-content-between">
                                    <div id="icone-clima">
                                        <i class=""></i><span id="condicoes"> Ensolarado</span>
                                    </div>
                                    <div class="">
                                        <i class="fa-solid fa-wind"></i> <span id="vel-vento"> 24km/h</span>
                                    </div>
                                </div>
                            </div>                            
                        </div>
                        <p>Clima</p>
                    </div>
                    <div class="widget-group">
                        <div class="row w-alerta">
                            <div class="alerta blink">
                                <p><i class="fa-solid fa-triangle-exclamation"></i></p>
                                <span><b>PORTA DIANTEIRA DIREITA ABERTA</b></span>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="col-5 popup hide">
                <ul>
                    <li><button>Rota para hospital mais próximo</button></li>
                    <li><button>SOS</button></li>
                    <li><button>Rota para posto de abastecimento mais próximo</button></li>
                </ul>
            </div>
        </div>
        <div class="atalho-popup hide"></div>
        
        <!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>

        <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
        <script>

            $.fn.extend({
                toggleText: function(a, b){
                    return this.text(this.text() == b ? a : b);
                }
            });

            let estado = document.querySelector('#estadoAc');
            let icone = document.querySelector('#icon-ac');
                $('#botaoAc').click(function(){
                    $('#icon-ac').toggleClass('blue-ac');
                    $('#acEstado').toggleText('A/C Desligado', 'A/C Ligado'); 
                });
            

            function aumentarAC(){
                let nmr = document.getElementById('nmrAc').value;
                const temp = document.getElementById('temperaturaAc');
                if(nmr < 28){
                    nmr++;
                    document.getElementById('nmrAc').value = nmr;
                    temp.innerHTML = nmr + '°';
                }
            }

            function diminuirAC(){
                let nmr = document.getElementById('nmrAc').value;
                const temp = document.getElementById('temperaturaAc');
                if(nmr > 16){
                    nmr--;
                    document.getElementById('nmrAc').value = nmr;
                    temp.innerHTML = nmr + '°';
                }
            }

            function acenderLuz(){
                const luz = document.getElementById('luz');

                luz.classList.toggle('icon-active');

            }

            function abrirGaragem(){
                const garagem = document.getElementById('garagem');

                garagem.classList.toggle('icon-active');

            }

            function modoEscuro(){
                const fundo = document.querySelector('body');
                const header = document.getElementById('header-box');
                const botaoClaro = document.querySelector('.modoClaro'); 
                const botaoEscuro = document.querySelector('.modoEscuro');
                const mode = document.querySelector('#mode');
                

                if(botaoClaro.classList.contains('hide')){
                    $('.modoEscuro').toggleClass('hide');
                    $('.modoClaro').toggleClass('hide');
                    $('body').toggleClass('dark-mode');
                    $('#header-box').toggleClass('dark-mode-header');                
                    $('.widget-sm').toggleClass('widget-dark');          
                    $('.widget-m').toggleClass('widget-dark');
                    $('.popup').toggleClass('popup-dark');
                    mode.innerHTML = 'Modo Claro';
                }

                else{               
                    $('.modoEscuro').toggleClass('hide');
                    $('.modoClaro').toggleClass('hide');
                    $('body').toggleClass('dark-mode');
                    $('#header-box').toggleClass('dark-mode-header');
                    $('.widget-sm').toggleClass('widget-dark');
                    $('.widget-m').toggleClass('widget-dark');               
                    $('.popup').toggleClass('popup-dark');
                    mode.innerHTML = 'Modo Escuro';
                }
            }

            function getTime(){
                function addZero(i) {
                    if (i < 10) {i = "0" + i}
                    return i;
                }
                let today = new Date();
                const mes = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
                let day = today.getDate() + " de " + (mes[today.getMonth()]) + " de " + today.getFullYear();
                let time = today.getHours() + ":" + addZero(today.getMinutes());
                const hora = document.querySelector('#header-time');
                const dia = document.querySelector('#header-day');
                const semana = ["Domingo", "Segunda-feira", "Terça-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "Sábado"];
                let weekday = semana[today.getDay()];

                dia.innerHTML = weekday + ', ' + day;
                hora.innerHTML = time;
            }

            $('#btn-popup').click(function(){
                $('.atalho-popup').show();
                $('.popup').show();
            });

            $(document).click(function(){           
                $('.atalho-popup').hide();
                $('.popup').hide();
            });

            $('#btn-popup').on('click', function (event) {
                event.stopPropagation();
            });
            
            setInterval(getTime, 1000);

            function getClima(){$.ajax({
                url: 'https://api.hgbrasil.com/weather?woeid=455827&format=json-cors&key=c507c5bc',
                contentType: "application/json",
                dataType: 'json',
                success: function(result){
                    attClima(result);
                }
            });
        }
        getClima();
        setInterval(getClima, 60000)

            function attClima(result){
                
                $('#temperaturaCl').html(result.results.temp + '°');
                $('#condicoes').html(' ' + result.results.description);
                $('#temp-max').html(result.results.forecast[0].max + '°');
                $('#temp-min').html(result.results.forecast[0].min + '°');
                $('#cond-esperadas').html(result.results.forecast[0].description);
                $('#vel-vento').html(result.results.wind_speedy);

               

                if(result.results.condition_slug == 'rain'){
                    $('#icone-clima').html('<i class="fa-solid fa-cloud-rain"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/rainy.jpg")');
                }
                else if(result.results.condition_slug == 'cloudly_day'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-cloud-sun"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/cloudly.jpg")');
                }
                else if(result.results.condition_slug == 'cloudly_night'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-cloud-moon"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/cloudly_n.jpg")');
                }
                else if(result.results.condition_slug == 'storm'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-cloud-bolt"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/storm.jpg")');
                }
                else if(result.results.condition_slug == 'clear_day'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-sun"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/clear.jpg")');
                }
                else if(result.results.condition_slug == 'clear_night'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-moon"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/clear_n.jpg")');
                }
                else if(result.results.condition_slug == 'fog'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-smog"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/fog.jpg")');
                }
                else if(result.results.condition_slug == 'snow'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-snowflake"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/snow.jpg")');
                }
                else if(result.results.condition_slug == 'hail'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-cloud-rain"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/rainy.jpg")');
                }
                else if(result.results.condition_slug == 'none-day'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-sun"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/clear.jpg")');
                }
                else if(result.results.condition_slug == 'none-night'){
                    $('#icone-clima > i').html('<i class="fa-solid fa-moon"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/clear_n.jpg")');
                }
                else{
                    $('#icone-clima > i').html('<i class="fa-solid fa-cloud"></i>');
                    $('#fundo-clima').css('background-image', 'url("/assets/imgs/cloudly.jpg")');
                }
            }
            
        
        </script>
    </body>
</html>